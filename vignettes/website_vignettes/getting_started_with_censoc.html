<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="CenSoc Project" />

<meta name="date" content="2023-01-24" />

<title>Getting Started with CenSoc</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started with CenSoc</h1>
<h4 class="author">CenSoc Project</h4>
<h4 class="date">2023-01-24</h4>



<div id="censoc-roadmap" class="section level2">
<h2>CenSoc Roadmap</h2>
<ol style="list-style-type: decimal">
<li>Download CenSoc File</li>
<li>Download 1940 census data from IPUMS</li>
<li>Merge CenSoc and census Files on <code>HISTID</code> variable</li>
</ol>
<p><strong>Note</strong>: The 1940 census file is large (10+ GB) — we
recommend having an appropriate workflow for handling large datasets in
R before getting started.</p>
</div>
<div id="downloading-censoc-file" class="section level2">
<h2>Downloading CenSoc File</h2>
<p>Download the CenSoc-DMF or CenSoc-Numident file from: <a href="https://censoc-download.demog.berkeley.edu/">https://censoc-download.demog.berkeley.edu</a></p>
<p>Whether the CenSoc-DMF or CenSoc-Numident file is a better choice for
your analysis will depend on the research question. See the <a href="https://censoc.org/data/">data</a> page for more information.</p>
</div>
<div id="downloading-1940-full-count-census-from-ipums" class="section level2">
<h2>Downloading 1940 Full-Count Census from IPUMS</h2>
<p>The CenSoc datasets link the 1940 Census to the mortality
records.</p>
<p><a href="https://ipums.org/what-is-ipums">IPUMS</a> provides
integrated census and survey data from across the world free of charge
to the broader research community. To access the IPUMS-USA data
collection, you first need to <a href="https://uma.pop.umn.edu/usa/user/new?return_url=https%3A%2F%2Fusa.ipums.org%2Fusa-action%2Fmenu">register</a>.</p>
<div id="create-ipums-extract" class="section level3">
<h3>Create IPUMS extract</h3>
<p>Once you have an account, proceed to <a href="https://usa.ipums.org/usa/" class="uri">https://usa.ipums.org/usa/</a> and, under ‘CREATE YOUR
CUSTOM DATA SET’, select ‘GET DATA’.</p>
<div id="select-data-sample" class="section level4">
<h4>Select data sample</h4>
<p>Select the 1940 Full Count Census:</p>
<ul>
<li>Click the ‘SELECT SAMPLES’ button. This will take you to a page with
all available census and ACS data.</li>
<li>Uncheck ‘Default sample from each year’</li>
<li>Select the ‘USA FULL COUNT’ tab</li>
<li>Check ‘1940 100%’</li>
<li>Click ‘SUBMIT SAMPLE SELECTIONS’</li>
</ul>
<p>This return you to the variable selection page.</p>
</div>
<div id="select-variables-for-analysis" class="section level4">
<h4>Select Variables for Analysis</h4>
<p>All extracts will by default include <code>HISTID</code>, the
variable used to the link the census file to the CenSoc file.</p>
<p>Choose variables for your analysis. For example, to include
<code>RACE</code>, slide over the ‘PERSON’ tab and select ‘RACE,
ETHNICITY, AND NATIVITY’.</p>
</div>
<div id="select-cases" class="section level4">
<h4>Select Cases</h4>
<p><strong>NOTE: I can’t actually find this feature on
IPUMS</strong></p>
<p>The IPUMS “select cases” feature allows users to conditionally choose
which states to include in an extract. This can be helpful if you are
only interested in a subset of the Census. For example, if you are
working with the CenSoc-DMF file, which includes only men, it makes
sense to restrict your cases to men-only.</p>
</div>
</div>
<div id="downloading-the-ipums-extract" class="section level3">
<h3>Downloading the IPUMS extract</h3>
<p>To work with IPUMS data in R, it is usually easiest to download the
data as a CSV file. To do this, on the EXTRACT REQUEST page, next to
‘DATA FORMAT’, click Change, select ‘Comma delimited (.csv)’ and
submit.</p>
<p>You can work with other formats in R as well, but CSV is generally
the easiest. The only downside is that variable values are numeric
codes. The <a href="https://cran.r-project.org/web/packages/ipumsr/vignettes/ipums.html">IPUMSR
package</a> helps assign variable labels, value labels, and more.</p>
<p>Once you are satisfied with your dataset, click the ‘SUBMIT EXTRACT’
button. Because it is full count data, you will need to agree to special
usage terms. Click OK to extract the dataset.</p>
<p>Given the size of the file, the processing may take several hours.
Once the file is ready, you will receive an email from IPUMS with a link
to download the resulting dataset. The IPUMS datasets will be compressed
in a .zip file, so you will have to open that after the download. For
more information on IPUMS extracts, please see <a href="https://usa.ipums.org/usa/data.shtml">IPUMS-USA</a>.</p>
</div>
</div>
<div id="merging-censoc-and-census" class="section level2">
<h2>Merging CenSoc and Census</h2>
<p>After downloading the 1940 Census and CenSoc files, the files must be
merged before analysis. The <code>HISTID</code> variable — available in
both CenSoc and Census files — can be used to merge the two
datasets.</p>
<p>Sample R code:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## read in censoc file</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>censoc <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;path/to/censoc/file.csv&#39;</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## read in census file</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>census <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;path/to/census/file.csv&#39;</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">## join the census files by HISTID</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> censoc <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(census, <span class="at">by =</span> <span class="st">&quot;HISTID&quot;</span>)</span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
