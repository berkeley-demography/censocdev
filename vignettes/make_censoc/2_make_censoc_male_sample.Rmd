---
title: "R Notebook"
output: html_notebook
---

### Load Packages
```{r}
library(censoc)
library(tidyverse)
library(data.table)
```

Read in Social Security Death Master file, census file, and create censoc file 
```{r}
socsec_files = c("/home/ipums/josh-ipums/progs/ssdm/ssdm1",
                     "/home/ipums/josh-ipums/progs/ssdm/ssdm2",
                     "/home/ipums/josh-ipums/progs/ssdm/ssdm3")

socsec <- load_socsec_deaths(socsec_files)
census <- load_census(census_file = "/home/ipums/casey-ipums/IPUMS2019/1940/TSV/P.tsv")
censoc <- create_censoc(census, socsec)
```

Calculate age at death variables 
```{r}
censoc <- calculate_age_at_death(censoc)
```

Optional: add household variables from census
```{r}
household_census <- fread("/home/ipums/casey-ipums/IPUMS2019/1940/TSV/H.tsv")
censoc <- add_household_variables(censoc = censoc, household_census = household_census)
```

Write out CenSoc file 
```{r}
fwrite(censoc, "/censoc/data/censoc_linked_with_census/1940/censoc_men_sample_matched_with_census_1940.csv")
```

